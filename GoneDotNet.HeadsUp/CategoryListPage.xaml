<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:headsUp="clr-namespace:GoneDotNet.HeadsUp"
             x:DataType="headsUp:CategoryListViewModel"
             x:Class="GoneDotNet.HeadsUp.CategoryListPage"
             Title="ðŸŽ¯ Manage Categories"
             NavigationPage.BackButtonTitle="Back">
    
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="{StaticResource GamePurple}" Offset="0.0" />
            <GradientStop Color="{StaticResource GameBlue}" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>
    
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="âž• Add" 
                     Command="{Binding CreateCommand}" />    
    </ContentPage.ToolbarItems>
    
    <Grid RowDefinitions="Auto, *" Margin="20">
        
        <!-- Header Section -->
        <Border Grid.Row="0" 
                BackgroundColor="{StaticResource White}"
                StrokeThickness="0"
                Padding="25,20"
                Margin="0,10,0,20">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="25"/>
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black" Offset="0,3" Radius="10" Opacity="0.3"/>
            </Border.Shadow>
            <VerticalStackLayout Spacing="8">
                <Label Text="ðŸŽ® CATEGORY MANAGER" 
                       FontAttributes="Bold"
                       FontSize="28"
                       TextColor="{StaticResource GamePurple}"
                       HorizontalOptions="Center">
                    <Label.Shadow>
                        <Shadow Brush="{StaticResource GameLightPurple}" Offset="1,1" Radius="2" Opacity="0.3"/>
                    </Label.Shadow>
                </Label>
                
                <Label Text="Create and manage your game categories!" 
                       FontSize="16"
                       TextColor="{StaticResource GameBlue}"
                       HorizontalOptions="Center"
                       FontAttributes="Italic"/>
            </VerticalStackLayout>
        </Border>
        
        <!-- Content Section -->
        <RefreshView Grid.Row="1" 
                     IsRefreshing="{Binding IsBusy}" 
                     Command="{Binding LoadCommand}">
            <CollectionView ItemsSource="{Binding Categories}">
                <CollectionView.EmptyView>
                    <VerticalStackLayout Spacing="20" 
                                       VerticalOptions="Center"
                                       Margin="40">
                        <Border BackgroundColor="{StaticResource GameOrange}"
                                StrokeThickness="0"
                                Padding="30,25"
                                HorizontalOptions="Center">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="20"/>
                            </Border.StrokeShape>
                            <Border.Shadow>
                                <Shadow Brush="Black" Offset="0,3" Radius="10" Opacity="0.3"/>
                            </Border.Shadow>
                            <VerticalStackLayout Spacing="15">
                                <Label Text="ðŸŽ²" 
                                       FontSize="48"
                                       HorizontalOptions="Center"/>
                                <Label Text="No Categories Yet!" 
                                       FontSize="22"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       HorizontalOptions="Center">
                                    <Label.Shadow>
                                        <Shadow Brush="Black" Offset="1,1" Radius="2" Opacity="0.5"/>
                                    </Label.Shadow>
                                </Label>
                                <Label Text="Create your first category to get started" 
                                       FontSize="14"
                                       TextColor="White"
                                       HorizontalOptions="Center"
                                       Opacity="0.9"/>
                            </VerticalStackLayout>
                        </Border>
                        
                        <Border BackgroundColor="{StaticResource GameGreen}"
                                StrokeThickness="0"
                                Padding="20,15">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="25"/>
                            </Border.StrokeShape>
                            <Border.Shadow>
                                <Shadow Brush="Black" Offset="0,3" Radius="8" Opacity="0.2"/>
                            </Border.Shadow>
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding CreateCommand}" />
                            </Border.GestureRecognizers>
                            <HorizontalStackLayout Spacing="10" 
                                                 HorizontalOptions="Center">
                                <Label Text="âž•" 
                                       FontSize="20"
                                       TextColor="White"
                                       VerticalOptions="Center"/>
                                <Label Text="CREATE FIRST CATEGORY" 
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       VerticalOptions="Center">
                                    <Label.Shadow>
                                        <Shadow Brush="Black" Offset="1,1" Radius="2" Opacity="0.4"/>
                                    </Label.Shadow>
                                </Label>
                            </HorizontalStackLayout>
                        </Border>
                    </VerticalStackLayout>
                </CollectionView.EmptyView>
                
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="15"/>
                </CollectionView.ItemsLayout>
                
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="headsUp:CategoryItemViewModel">
                        <Border BackgroundColor="{StaticResource White}"
                                StrokeThickness="0"
                                Padding="0"
                                HeightRequest="110">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="20"/>
                            </Border.StrokeShape>
                            <Border.Shadow>
                                <Shadow Brush="Black" Offset="0,3" Radius="8" Opacity="0.15"/>
                            </Border.Shadow>
                            
                            <Grid ColumnDefinitions="8, *, Auto">
                                <!-- Colorful left accent -->
                                <Border Grid.Column="0" 
                                        StrokeThickness="0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="20,0,0,20"/>
                                    </Border.StrokeShape>
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Color="{StaticResource GamePink}" Offset="0.0" />
                                            <GradientStop Color="{StaticResource GameOrange}" Offset="0.5" />
                                            <GradientStop Color="{StaticResource GameYellow}" Offset="1.0" />
                                        </LinearGradientBrush>
                                    </Border.Background>
                                </Border>
                                
                                <!-- Content Area -->
                                <VerticalStackLayout Grid.Column="1" 
                                                   Spacing="8" 
                                                   VerticalOptions="Center"
                                                   Padding="20">
                                    <Label Text="{Binding Name}" 
                                           FontSize="20" 
                                           FontAttributes="Bold"
                                           TextColor="{StaticResource GamePurple}">
                                        <Label.Shadow>
                                            <Shadow Brush="{StaticResource GameLightPurple}" Offset="1,1" Radius="1" Opacity="0.2"/>
                                        </Label.Shadow>
                                    </Label>
                                    
                                    <Label Text="{Binding Description}" 
                                           FontSize="14"
                                           TextColor="{StaticResource Gray600}"
                                           LineBreakMode="WordWrap"
                                           MaxLines="2"/>
                                </VerticalStackLayout>
                                
                                <!-- Delete Button -->
                                <Border Grid.Column="2" 
                                        BackgroundColor="{StaticResource GameRed}"
                                        StrokeThickness="0"
                                        Padding="15,12"
                                        VerticalOptions="Center"
                                        Margin="10">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="15"/>
                                    </Border.StrokeShape>
                                    <Border.Shadow>
                                        <Shadow Brush="Black" Offset="0,2" Radius="4" Opacity="0.2"/>
                                    </Border.Shadow>
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding DeleteCommand}" />
                                    </Border.GestureRecognizers>
                                    <Label Text="ðŸ—‘ï¸" 
                                           FontSize="18"
                                           TextColor="White"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center"/>
                                </Border>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </RefreshView>
    </Grid>
</ContentPage>