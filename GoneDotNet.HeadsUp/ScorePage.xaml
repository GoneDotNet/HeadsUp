<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:headsUp="clr-namespace:GoneDotNet.HeadsUp"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:DataType="headsUp:ScoreViewModel"
             x:Class="GoneDotNet.HeadsUp.ScorePage"
             NavigationPage.HasNavigationBar="False">
    
    <Grid>
        <toolkit:MediaElement Source="{Binding VideoUrl}"
                              ShouldAutoPlay="True"
                              Volume="1.0" 
                              ShouldLoopPlayback="True" 
                              HorizontalOptions="Fill"
                              VerticalOptions="Fill" />
        
        <BoxView BackgroundColor="Black" 
                 Opacity="0.4"
                 HorizontalOptions="Fill"
                 VerticalOptions="Fill" />
        
        <Grid RowDefinitions="Auto, *, Auto" 
              Margin="20"
              VerticalOptions="Fill">
            
            <!-- Header overlay -->
            <Border Grid.Row="0" 
                    BackgroundColor="{StaticResource White}"
                    StrokeThickness="0"
                    Padding="20,15"
                    Margin="0,40,0,20"
                    Opacity="0.95">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="25"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,3" Radius="12" Opacity="0.4"/>
                </Border.Shadow>
                <Label Text="🎬 GAME REPLAY" 
                       FontSize="28"
                       FontAttributes="Bold"
                       TextColor="{StaticResource GamePurple}"
                       HorizontalOptions="Center">
                    <Label.Shadow>
                        <Shadow Brush="{StaticResource GameLightPurple}" 
                                Offset="1,1" 
                                Radius="2" 
                                Opacity="0.3"/>
                    </Label.Shadow>
                </Label>
            </Border>
            
            <!-- Game Summary Card -->
            <StackLayout Grid.Row="1" 
                         VerticalOptions="Center"
                         HorizontalOptions="Center"
                         Spacing="20">
                
                <!-- Category Card -->
                <Border BackgroundColor="{StaticResource White}"
                        StrokeThickness="0"
                        Padding="30,20"
                        Margin="20,0"
                        Opacity="0.93">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="20"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,4" Radius="15" Opacity="0.3"/>
                    </Border.Shadow>
                    <StackLayout Spacing="10">
                        <Label Text="📂 Category" 
                               FontSize="16"
                               FontAttributes="Italic"
                               TextColor="{StaticResource Gray600}"
                               HorizontalOptions="Center"/>
                        <Label Text="{Binding Category}" 
                               FontSize="24"
                               FontAttributes="Bold"
                               TextColor="{StaticResource GamePurple}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"/>
                    </StackLayout>
                </Border>
                
                <!-- Score Display -->
                <Border BackgroundColor="{StaticResource GameGreen}"
                        StrokeThickness="0"
                        Padding="40,30"
                        Margin="30,0"
                        Opacity="0.95">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="25"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,5" Radius="20" Opacity="0.4"/>
                    </Border.Shadow>
                    <StackLayout Spacing="5">
                        <Label Text="🏆 FINAL SCORE" 
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="White"
                               HorizontalOptions="Center"
                               Opacity="0.9"/>
                        <Label Text="{Binding CorrectAnswers, StringFormat='{0} Correct!'}" 
                               FontSize="36"
                               FontAttributes="Bold"
                               TextColor="White"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center">
                            <Label.Shadow>
                                <Shadow Brush="Black" Offset="2,2" Radius="4" Opacity="0.6"/>
                            </Label.Shadow>
                        </Label>
                    </StackLayout>
                </Border>
                
                <!-- Date Card -->
                <Border BackgroundColor="{StaticResource GameBlue}"
                        StrokeThickness="0"
                        Padding="25,15"
                        Margin="40,0"
                        Opacity="0.92">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="18"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,3" Radius="12" Opacity="0.3"/>
                    </Border.Shadow>
                    <Label Text="{Binding CreatedAt, StringFormat='📅 {0:MMMM dd, yyyy}'}" 
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="White"
                           HorizontalOptions="Center"
                           HorizontalTextAlignment="Center">
                        <Label.Shadow>
                            <Shadow Brush="Black" Offset="1,1" Radius="2" Opacity="0.4"/>
                        </Label.Shadow>
                    </Label>
                </Border>
            </StackLayout>
            
            <!-- Bottom navigation overlay -->
            <Border Grid.Row="2"
                    BackgroundColor="{StaticResource GameOrange}"
                    StrokeThickness="0"
                    Padding="25,15"
                    Margin="20,20,20,40"
                    Opacity="0.9">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,3" Radius="10" Opacity="0.4"/>
                </Border.Shadow>
                <Label Text="🎯 Tap to return to main menu"
                       FontSize="16"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center">
                    <Label.Shadow>
                        <Shadow Brush="Black" Offset="1,1" Radius="2" Opacity="0.4"/>
                    </Label.Shadow>
                </Label>
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type headsUp:ScorePage}}, Path=BindingContext.BackCommand}" />
                </Border.GestureRecognizers>
            </Border>
        </Grid>
    </Grid>
</ContentPage>